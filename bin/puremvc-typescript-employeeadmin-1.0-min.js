var EmployeeAdmin;(function(a){var b=(function(){function c(){}c.STARTUP="startup";c.NEW_USER="newUser";c.DELETE_USER="deleteUser";c.CANCEL_SELECTED="cancelSelected";c.USER_SELECTED="userSelected";c.USER_ADDED="userAdded";c.USER_UPDATED="userUpdated";c.USER_DELETED="userDeleted";c.ADD_ROLE="addRole";c.ADD_ROLE_RESULT="addRoleResult";return c})();a.NotificationNames=b})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(a){var b=(function(){function c(){}c.ROLE_PROXY="roleProxy";c.USER_PROXY="userProxy";
return c})();a.ProxyNames=b})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(b){var a=(function(){function e(g,f){this.ordinal=null;this.value=null;this.value=g;this.ordinal=f}e.prototype.equals=function(f){return(this.ordinal==f.ordinal&&this.value==f.value)};e.NONE_SELECTED=new e("Select a department",-1);e.ACCT=new e("Accounting",0);e.SALES=new e("Sales",1);e.PLANT=new e("Plant",2);e.SHIPPING=new e("Shipping",3);e.QC=new e("Quality Control",4);e.getList=function d(){return[e.ACCT,e.SALES,e.PLANT]
};e.getComboList=function c(){var f=e.getList();f.unshift(e.NONE_SELECTED);return f};return e})();b.DeptEnum=a})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(a){var b=(function(){function c(){this.uname="";this.fname="";this.lname="";this.email="";this.password="";this.department=a.DeptEnum.NONE_SELECTED}c.prototype.getIsValid=function(){return this.uname!=""&&this.password!=""&&this.department!=a.DeptEnum.NONE_SELECTED};c.prototype.getGivenName=function(){return this.lname+", "+this.fname
};return c})();a.UserVO=b})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(a){var b=(function(){function c(){this.uname="";this.roles=new Array()}return c})();a.RoleVO=b})(EmployeeAdmin||(EmployeeAdmin={}));var __extends=this.__extends||function(e,a){function c(){this.constructor=e}c.prototype=a.prototype;e.prototype=new c()};var EmployeeAdmin;(function(a){var b=(function(d){__extends(c,d);function c(){d.apply(this,arguments)}c.prototype.getUsers=function(){return this.data};c.prototype.addItem=function(e){this.getUsers().push(e)
};c.prototype.getUser=function(e){var g=this.getUsers();for(var f=0;f<g.length;f++){if(g[f].uname===e){return g[f]}}return null};c.prototype.updateItem=function(e){var g=this.getUsers();for(var f=0;f<g.length;f++){if(g[f].uname===e.uname){g[f]=e}}};c.prototype.deleteItem=function(e){var g=this.getUsers();for(var f=0;f<g.length;f++){if(g[f].uname===e){g.splice(f,1)}}};return c})(puremvc.Proxy);a.UserProxy=b})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(a){var b=(function(){function e(h,g){this.ordinal=null;
this.value=null;this.value=h;this.ordinal=g}e.prototype.equals=function(g){return(this.ordinal==g.ordinal&&this.value==g.value)};e.NONE_SELECTED=new e("Select a role",-1);e.ADMIN=new e("Administrator",0);e.ACCT_PAY=new e("Accounts Payable",1);e.ACCT_RCV=new e("Accounts Receivable",2);e.EMP_BENEFITS=new e("Employee Benefits",3);e.GEN_LEDGER=new e("General Ledger",4);e.PAYROLL=new e("Payroll",5);e.INVENTORY=new e("Inventory",6);e.PRODUCTION=new e("Production",7);e.QUALITY_CTL=new e("Quality Control",8);
e.SALES=new e("Sales",9);e.ORDERS=new e("Orders",10);e.CUSTOMERS=new e("Customers",11);e.SHIPPING=new e("Shipping",12);e.RETURNS=new e("Returns",13);e.getList=function d(){return[e.ADMIN,e.ACCT_PAY,e.ACCT_RCV,e.EMP_BENEFITS,e.GEN_LEDGER,e.PAYROLL,e.INVENTORY,e.PRODUCTION,e.QUALITY_CTL,e.SALES,e.ORDERS,e.CUSTOMERS,e.SHIPPING,e.RETURNS]};e.getComboList=function c(){var g=e.getList();g.unshift(e.NONE_SELECTED);return g};e.getItem=function f(g){var j=e.getList();for(var h=0;h<j.length;h++){if(j[h].ordinal==g){return j[h]
}}return null};return e})();a.RoleEnum=b})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(a){var b=(function(c){__extends(d,c);function d(){c.apply(this,arguments)}d.prototype.getRoles=function(){return this.data};d.prototype.addItem=function(e){this.getRoles().push(e)};d.prototype.deleteItem=function(e){var g=this.getRoles();for(var f=0;f<g.length;f++){if(g[f].uname===e){g.splice(f,1);break}}};d.prototype.doesUserHaveRole=function(e,n){var l=this.getRoles();var k=false;for(var g=0;
g<l.length;g++){if(l[g].uname===e.uname){var m=l[g].roles;for(var f=0;f<m.length;f++){var h=m[f];if(h.equals(n)){k=true;break}}break}}return k};d.prototype.addRoleToUser=function(f,k){var h=this.getRoles();var e=false;if(!this.doesUserHaveRole(f,k)){for(var g=0;g<h.length;g++){if(h[g].uname==f.uname){var j=h[g].roles;j.push(k);e=true;break}}}};d.prototype.removeRoleFromUser=function(e,m){var k=this.getRoles();if(this.doesUserHaveRole(e,m)){for(var g=0;g<k.length;g++){if(k[g].uname===e.uname){var l=k[g].roles;
for(var f=0;f<l.length;f++){var h=l[f];if(h.equals(m)){l.splice(f,1);break}}break}}}};d.prototype.getUserRoles=function(e){var g=this.getRoles();var h=new Array();for(var f=0;f<g.length;f++){if(g[f].uname===e){h=g[f].roles;break}}return h};return d})(puremvc.Proxy);a.RoleProxy=b})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(a){var b=(function(c){__extends(d,c);function d(){c.apply(this,arguments)}d.prototype.execute=function(e){var f=new a.UserProxy(a.ProxyNames.USER_PROXY,this.generateUsers());
var g=new a.RoleProxy(a.ProxyNames.ROLE_PROXY,this.generateRoles());this.facade.registerProxy(f);this.facade.registerProxy(g)};d.prototype.generateUsers=function(){var e;var f=new Array();e=new a.UserVO();e.uname="lstooge";e.fname="Larry";e.lname="Stooge";e.email="larry@stooges.com";e.password="ijk456";e.department=a.DeptEnum.ACCT;f.push(e);e=new a.UserVO();e.uname="cstooge";e.fname="Curly";e.lname="Stooge";e.email="curly@stooges.com";e.password="xyz987";e.department=a.DeptEnum.SALES;f.push(e);e=new a.UserVO();
e.uname="mstooge";e.fname="Moe";e.lname="Stooge";e.email="moe@stooges.com";e.password="abc123";e.department=a.DeptEnum.PLANT;f.push(e);return f};d.prototype.generateRoles=function(){var f;var e=new Array();f=new a.RoleVO();f.uname="lstooge";f.roles=[a.RoleEnum.PAYROLL,a.RoleEnum.EMP_BENEFITS];e.push(f);f=new a.RoleVO();f.uname="cstooge";f.roles=[a.RoleEnum.ACCT_PAY,a.RoleEnum.ACCT_RCV,a.RoleEnum.GEN_LEDGER];e.push(f);f=new a.RoleVO();f.uname="mstooge";f.roles=[a.RoleEnum.INVENTORY,a.RoleEnum.PRODUCTION,a.RoleEnum.SALES,a.RoleEnum.SHIPPING];
e.push(f);return e};return d})(puremvc.SimpleCommand);a.PrepModelCommand=b})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(a){var b=(function(){function c(){}c.USER_FORM_MEDIATOR="userFormMediator";c.USER_LIST_MEDIATOR="userListMediator";c.ROLE_PANEL_MEDIATOR="rolePanelMediator";return c})();a.MediatorNames=b})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(a){var b=(function(c){__extends(d,c);function d(f,e){c.call(this,f,e);this.userList=null;this.registerListeners();
var g=this.facade.retrieveProxy(a.ProxyNames.USER_PROXY);e.setUsers(g.getUsers())}d.prototype.registerListeners=function(){var e=this.getUserList();e.addEventListener(a.UserList.NEW,this.onNew,this);e.addEventListener(a.UserList.DELETE,this.onDelete,this);e.addEventListener(a.UserList.SELECT,this.onSelect,this)};d.prototype.unregisterListeners=function(){var e=this.getUserList();e.removeEventListener(a.UserList.NEW,this.onNew,this);e.removeEventListener(a.UserList.DELETE,this.onDelete,this);e.removeEventListener(a.UserList.SELECT,this.onSelect,this)
};d.prototype.getUserList=function(){return this.viewComponent};d.prototype.listNotificationInterests=function(){return[a.NotificationNames.CANCEL_SELECTED,a.NotificationNames.USER_UPDATED,a.NotificationNames.USER_ADDED,a.NotificationNames.USER_DELETED]};d.prototype.handleNotification=function(f){var e=this.getUserList();var g=this.facade.retrieveProxy(a.ProxyNames.USER_PROXY);switch(f.getName()){case a.NotificationNames.CANCEL_SELECTED:e.deSelect();break;case a.NotificationNames.USER_UPDATED:e.setUsers(g.getUsers());
e.deSelect();break;case a.NotificationNames.USER_ADDED:e.setUsers(g.getUsers());e.deSelect();break;case a.NotificationNames.USER_DELETED:e.setUsers(g.getUsers());e.deSelect();break}};d.prototype.onNew=function(){var e=new a.UserVO();this.sendNotification(a.NotificationNames.NEW_USER,e)};d.prototype.onDelete=function(i,h){var e=this.getUserList();var f=e.getSelectedUser();var j=this.facade.retrieveProxy(a.ProxyNames.USER_PROXY);var g=j.getUser(f);this.sendNotification(a.NotificationNames.DELETE_USER,g)
};d.prototype.onSelect=function(i,h){var e=this.getUserList();var f=e.getSelectedUser();var j=this.facade.retrieveProxy(a.ProxyNames.USER_PROXY);var g=j.getUser(f);this.sendNotification(a.NotificationNames.USER_SELECTED,g)};d.prototype.onRemove=function(){this.unregisterListeners();this.getUserList().destroy()};return d})(puremvc.Mediator);a.UserListMediator=b})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(a){var b=(function(d){__extends(c,d);function c(f,e){d.call(this,f,e);this.userProxy=null;
this.registerListeners();this.userProxy=this.facade.retrieveProxy(a.ProxyNames.USER_PROXY)}c.prototype.getUserForm=function(){return this.viewComponent};c.prototype.registerListeners=function(){var e=this.getUserForm();e.addEventListener(a.UserForm.ADD,this.onAdd,this);e.addEventListener(a.UserForm.UPDATE,this.onUpdate,this);e.addEventListener(a.UserForm.CANCEL,this.onCancel,this)};c.prototype.unregisterListeners=function(){var e=this.getUserForm();e.addEventListener(a.UserForm.ADD,this.onAdd,this);
e.addEventListener(a.UserForm.UPDATE,this.onUpdate,this);e.addEventListener(a.UserForm.CANCEL,this.onCancel,this)};c.prototype.onAdd=function(g,f){var e=this.getUserForm().getUser();this.userProxy.addItem(e);this.sendNotification(a.NotificationNames.USER_ADDED,e);var h=this.getUserForm();h.clearForm();h.setEnabled(false);h.setMode(a.UserForm.MODE_ADD)};c.prototype.onUpdate=function(g,f){var e=this.getUserForm().getUser();this.userProxy.updateItem(e);this.sendNotification(a.NotificationNames.USER_UPDATED,e);
var h=this.getUserForm();h.clearForm();h.setEnabled(false);h.setMode(a.UserForm.MODE_ADD)};c.prototype.onCancel=function(f,e){this.sendNotification(a.NotificationNames.CANCEL_SELECTED);var g=this.getUserForm();g.clearForm();g.setEnabled(false);g.setMode(a.UserForm.MODE_ADD)};c.prototype.listNotificationInterests=function(){return[a.NotificationNames.NEW_USER,a.NotificationNames.USER_DELETED,a.NotificationNames.USER_SELECTED]};c.prototype.handleNotification=function(f){var g=this.getUserForm();var e;
switch(f.getName()){case a.NotificationNames.NEW_USER:g.setUser(f.getBody());g.setMode(a.UserForm.MODE_ADD);g.setEnabled(true);g.setFocus();break;case a.NotificationNames.USER_DELETED:g.clearForm();g.setEnabled(false);break;case a.NotificationNames.USER_SELECTED:e=f.getBody();g.clearForm();g.setUser(e);g.setMode(a.UserForm.MODE_EDIT);g.setEnabled(true);g.setFocus();break}};c.prototype.onRemove=function(){this.unregisterListeners();this.getUserForm().destroy()};c.ADD="add";c.UPDATE="update";c.CANCEL="cancel";
c.MODE_ADD="modeAdd";c.MODE_EDIT="modeEdit";return c})(puremvc.Mediator);a.UserFormMediator=b})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(a){var b=(function(d){__extends(c,d);function c(f,e){d.call(this,f,e);this.roleProxy=null;this.registerListeners();this.roleProxy=this.facade.retrieveProxy(a.ProxyNames.ROLE_PROXY)}c.prototype.getRolePanel=function(){return this.viewComponent};c.prototype.registerListeners=function(){var e=this.getRolePanel();e.addEventListener(a.RolePanel.ADD,this.onAddRole,this);
e.addEventListener(a.RolePanel.REMOVE,this.onRemoveRole,this)};c.prototype.unregisterListeners=function(){var e=this.getRolePanel();e.removeEventListener(a.RolePanel.ADD,this.onAddRole,this);e.removeEventListener(a.RolePanel.REMOVE,this.onRemoveRole,this)};c.prototype.onAddRole=function(f,e){this.roleProxy.addRoleToUser(this.getRolePanel().getUser(),this.getRolePanel().getSelectedRole());this.updateUserRoleList();this.getRolePanel().setMode(null)};c.prototype.onRemoveRole=function(f,e){this.roleProxy.removeRoleFromUser(this.getRolePanel().getUser(),this.getRolePanel().getSelectedRole());
this.updateUserRoleList();this.getRolePanel().setMode(null)};c.prototype.updateUserRoleList=function(){var e=this.getRolePanel().getUser();var f=this.roleProxy.getUserRoles(e.uname);this.getRolePanel().setUserRoles(f)};c.prototype.listNotificationInterests=function(){return[a.NotificationNames.NEW_USER,a.NotificationNames.USER_ADDED,a.NotificationNames.USER_UPDATED,a.NotificationNames.USER_DELETED,a.NotificationNames.CANCEL_SELECTED,a.NotificationNames.USER_SELECTED,a.NotificationNames.ADD_ROLE_RESULT]
};c.prototype.handleNotification=function(e){var g=this.getRolePanel();switch(e.getName()){case a.NotificationNames.NEW_USER:g.clearForm();g.setEnabled(false);break;case a.NotificationNames.USER_ADDED:g.setUser(e.getBody());var f=new a.RoleVO();f.uname=g.getUser().uname;this.roleProxy.addItem(f);g.clearForm();g.setEnabled(false);break;case a.NotificationNames.USER_UPDATED:g.clearForm();g.setEnabled(false);break;case a.NotificationNames.USER_DELETED:g.clearForm();g.setEnabled(false);break;case a.NotificationNames.CANCEL_SELECTED:g.clearForm();
g.setEnabled(false);break;case a.NotificationNames.USER_SELECTED:g.clearForm();g.setEnabled(true);g.setMode(null);g.setUser(e.getBody());this.updateUserRoleList();break;case a.NotificationNames.ADD_ROLE_RESULT:this.updateUserRoleList();break}};c.prototype.onRemove=function(){this.unregisterListeners();this.getRolePanel().destroy()};return c})(puremvc.Mediator);a.RolePanelMediator=b})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(b){var c=(function(){function d(){this.listenerMap=null;
this.listenerMap={}}d.prototype.dispatchEvent=function(k,j){if(typeof j==="undefined"){j=null}if(typeof k=="undefined"){return}if(typeof this.listenerMap[d.QUEUE_PATTERN+k]=="undefined"){return}var f=this.listenerMap[d.QUEUE_PATTERN+k].slice(0);var e=f.length;for(var h=0;h<e;h++){var g=f[h];if(typeof g.context!="undefined"){g.listener.call(g.context,k,j)}else{g.listener.call(this,k,j)}}};d.prototype.addEventListener=function(l,m,k){if(typeof k==="undefined"){k=null}if(typeof l=="undefined"){return
}if(typeof m!="function"){return}var h=new a(m,k);var f;if(typeof this.listenerMap[d.QUEUE_PATTERN+l]=="undefined"){f=this.listenerMap[d.QUEUE_PATTERN+l]=[]}else{f=this.listenerMap[d.QUEUE_PATTERN+l]}var e=f.length;for(var j=0;j<e;j++){var g=f[j];if(g.equals(h)){return}}f.push(h)};d.prototype.removeEventListener=function(k,l,j){if(typeof j==="undefined"){j=null}if(typeof k=="undefined"){return}if(typeof l=="undefined"){return}if(typeof this.listenerMap[d.QUEUE_PATTERN+k]=="undefined"){return}var f=this.listenerMap[d.QUEUE_PATTERN+k];
var e=f.length;for(var h=0;h<e;h++){var g=f[h];if(g.equals(new a(l,j))){f.splice(h,1);return}}};d.prototype.destroy=function(){this.listenerMap={}};d.QUEUE_PATTERN="@_@";return d})();b.UiComponent=c;var a=(function(){function d(f,e){this.listener=f;this.context=e}d.prototype.equals=function(e){if(e.listener===this.listener){if(typeof e.context!="undefined"){if(e.context==null&&this.context==null){return true}if(e.context===this.context){return true}}}return false};return d})()})(EmployeeAdmin||(EmployeeAdmin={}));
var EmployeeAdmin;(function(a){var b=(function(d){__extends(c,d);function c(){d.call(this);this.user=null;this.userRoles=null;this.selectedRole=null;this.mode=null;this.rolePanel=null;this.roleList=null;this.userRoleList=null;this.addRoleButton=null;this.removeRoleButton=null;this.initializeChildren();this.bindListeners();this.fillRoleList();this.setEnabled(false)}c.prototype.initializeChildren=function(){this.rolePanel=jQuery(".role-panel");this.userRoleList=this.rolePanel.find("#user-role-list");
this.userRoleList.jqGrid({datatype:"local",width:280,height:170,colNames:["Roles"],colModel:[{name:"value",index:"value"}]});this.roleList=this.rolePanel.find(".role-list");this.addRoleButton=this.rolePanel.find(".add-role-button").button();this.removeRoleButton=this.rolePanel.find(".remove-role-button").button()};c.prototype.bindListeners=function(){var e=".UserRoleList";this.addRoleButton.on("click"+e,jQuery.proxy(this,"addRoleButton_clickHandler"));this.removeRoleButton.on("click"+e,jQuery.proxy(this,"removeRoleButton_clickHandler"));
this.roleList.on("change"+e,jQuery.proxy(this,"roleList_changeHandler"));this.userRoleList.jqGrid("setGridParam",{onSelectRow:jQuery.proxy(this,"userRoleList_changeHandler")})};c.prototype.unbindListeners=function(){var e=".UserRoleList";this.addRoleButton.off("click"+e);this.removeRoleButton.off("click"+e);this.roleList.off("change"+e);this.userRoleList.jqGrid("setGridParam",{onSelectRow:null})};c.prototype.fillRoleList=function(){var g=a.RoleEnum.getComboList();this.roleList.empty();var j="";for(var f=0;
f<g.length;f++){var k=g[f];var h='value="'+k.ordinal+'"';var e=f==0?"selected":"";j+="<option "+h+" "+e+" >"+k.value+"</option>"}this.roleList.html(j)};c.prototype.setUserRoles=function(f){this.userRoleList.jqGrid("clearGridData");if(!f){return}this.userRoles=f;for(var e=0;e<f.length;e++){var g=f[e];this.userRoleList.jqGrid("addRowData",e+1,g)}};c.prototype.getUser=function(){return this.user};c.prototype.setUser=function(e){this.user=e};c.prototype.getSelectedRole=function(){return this.selectedRole
};c.prototype.setEnabled=function(e){if(e){this.userRoleList.removeAttr("disabled");this.roleList.removeAttr("disabled");this.addRoleButton.button("enable");this.removeRoleButton.button("enable")}else{this.userRoleList.attr("disabled","disabled");this.roleList.attr("disabled","disabled");this.addRoleButton.button("disable");this.removeRoleButton.button("disable")}if(!e){this.roleList.prop("selectedIndex",0)}};c.prototype.setMode=function(e){switch(e){case c.ADD_MODE:this.addRoleButton.button("enable");
this.removeRoleButton.button("disable");break;case c.REMOVE_MODE:this.addRoleButton.button("disable");this.removeRoleButton.button("enable");this.roleList.prop("selectedIndex",0);break;default:this.addRoleButton.button("disable");this.removeRoleButton.button("disable")}};c.prototype.clearForm=function(){this.user=null;this.setUserRoles(null);this.roleList.prop("selectedIndex",0);this.userRoleList.jqGrid("resetSelection")};c.prototype.destroy=function(){d.prototype.destroy.call(this);this.unbindListeners()
};c.prototype.addRoleButton_clickHandler=function(){this.dispatchEvent(c.ADD)};c.prototype.removeRoleButton_clickHandler=function(){this.dispatchEvent(c.REMOVE)};c.prototype.userRoleList_changeHandler=function(f){var e=this.userRoleList.jqGrid("getInd",f);this.selectedRole=this.userRoles[e-1];this.setMode(c.REMOVE_MODE)};c.prototype.roleList_changeHandler=function(){this.userRoleList.jqGrid("resetSelection");var g=a.RoleEnum.getComboList();this.selectedRole=g[this.roleList.prop("selectedIndex")];
var e=false;for(var f=0;f<this.userRoles.length;f++){var h=this.userRoles[f];if(h.equals(this.selectedRole)){e=true;break}}if(this.selectedRole==a.RoleEnum.NONE_SELECTED||e){this.setMode(null)}else{this.setMode(c.ADD_MODE)}};c.ADD="add";c.REMOVE="remove";c.ADD_MODE="addMode";c.REMOVE_MODE="removeMode";return c})(a.UiComponent);a.RolePanel=b})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(b){var a=(function(d){__extends(c,d);function c(){d.call(this);this.userFormPanel=null;this.uname=null;
this.fname=null;this.lname=null;this.email=null;this.password=null;this.confirm=null;this.department=null;this.cancelButton=null;this.submitButton=null;this.user=null;this.userRoles=null;this.mode=null;this.initializeChildren();this.bindListeners();this.clearForm();this.setEnabled(false)}c.prototype.initializeChildren=function(){this.userFormPanel=jQuery(".user-form-panel");this.uname=this.userFormPanel.find("#uname");this.fname=this.userFormPanel.find("#fname");this.lname=this.userFormPanel.find("#lname");
this.email=this.userFormPanel.find("#email");this.password=this.userFormPanel.find("#password");this.confirm=this.userFormPanel.find("#confirm");this.department=this.userFormPanel.find(".department");this.submitButton=this.userFormPanel.find("#submit-button").button();this.cancelButton=this.userFormPanel.find("#cancel-button").button()};c.prototype.bindListeners=function(){var f=".UserForm";var e=jQuery.proxy(this,"field_focusHandler");this.uname.on("focus"+f,e);this.password.on("focus"+f,e);this.confirm.on("focus"+f,e);
this.department.on("focus"+f,e);this.submitButton.on("click"+f,jQuery.proxy(this,"submitButton_clickHandler"));this.cancelButton.on("click"+f,jQuery.proxy(this,"cancelButton_clickHandler"))};c.prototype.unbindListeners=function(){var e=".UserForm";this.uname.off("focus"+e);this.password.off("focus"+e);this.confirm.off("focus"+e);this.department.off("focus"+e);this.submitButton.off("click"+e);this.cancelButton.off("click"+e)};c.prototype.fillList=function(h){var k="";for(var g=0;g<h.length;g++){var f=h[g];
var j='value="'+f.ordinal+'"';var e="";if(this.user&&f.equals(this.user.department)){e="selected"}if(!this.user&&f.equals(b.DeptEnum.NONE_SELECTED)){e="selected"}k+="<option "+j+" "+e+" >"+f.value+"</option>"}this.department.html(k)};c.prototype.setFocus=function(){this.fname.focus()};c.prototype.setUser=function(e){this.user=e;if(!e){this.clearForm()}else{this.uname.val(e.uname);this.fname.val(e.fname);this.lname.val(e.lname);this.email.val(e.email);this.password.val(e.password);this.confirm.val(e.password);
this.fillList(b.DeptEnum.getComboList())}};c.prototype.getUser=function(){this.updateUser();return this.user};c.prototype.updateUser=function(){this.user.uname=this.uname.val();this.user.fname=this.fname.val();this.user.lname=this.lname.val();this.user.email=this.email.val();this.user.password=this.password.val();var f=parseInt(this.department.val())+1;var e=b.DeptEnum.getComboList();this.user.department=e[f]};c.prototype.clearForm=function(){this.uname.val("");this.fname.val("");this.lname.val("");
this.email.val("");this.password.val("");this.confirm.val("");this.fillList([]);this.setFieldError("uname",false);this.setFieldError("password",false);this.setFieldError("confirm",false);this.setFieldError("department",false)};c.prototype.setEnabled=function(e){if(e){this.fname.removeAttr("disabled");this.lname.removeAttr("disabled");this.email.removeAttr("disabled");this.password.removeAttr("disabled");this.confirm.removeAttr("disabled");this.department.removeAttr("disabled");this.submitButton.button("enable");
this.cancelButton.button("enable");if(this.mode==c.MODE_EDIT){this.uname.attr("disabled","disabled")}else{this.uname.removeAttr("disabled")}}else{this.uname.attr("disabled","disabled");this.fname.attr("disabled","disabled");this.lname.attr("disabled","disabled");this.email.attr("disabled","disabled");this.password.attr("disabled","disabled");this.confirm.attr("disabled","disabled");this.department.attr("disabled","disabled");this.submitButton.button("disable");this.cancelButton.button("disable")}};
c.prototype.setMode=function(e){this.mode=e;switch(e){case c.MODE_ADD:this.submitButton.find(".ui-button-text").text("Add");break;case c.MODE_EDIT:this.submitButton.find(".ui-button-text").text("Save");break}};c.prototype.destroy=function(){d.prototype.destroy.call(this);this.unbindListeners()};c.prototype.submitButton_clickHandler=function(){this.updateUser();if(this.getErrors()){return}var e=this.getUser();if(e.getIsValid()){if(this.mode==c.MODE_ADD){this.dispatchEvent(c.ADD)}else{this.dispatchEvent(c.UPDATE)
}}};c.prototype.cancelButton_clickHandler=function(){this.dispatchEvent(c.CANCEL)};c.prototype.field_focusHandler=function(e){this.setFieldError(e.target.id,false)};c.prototype.getErrors=function(){var f=false;if(this.uname.val()==""){this.setFieldError("uname",f=true)}else{this.setFieldError("uname",false)}if(this.password.val()==""){this.setFieldError("password",f=true)}else{this.setFieldError("password",false)}if(this.password.val()!=""&&this.confirm.val()!=this.password.val()){this.setFieldError("confirm",f=true)
}else{this.setFieldError("confirm",false)}var h=parseInt(this.department.val())+1;var g=b.DeptEnum.getComboList();var e=g[h];if(e.equals(b.DeptEnum.NONE_SELECTED)){this.setFieldError("department",f=true)}else{this.setFieldError("department",false)}return f};c.prototype.setFieldError=function(h,f){var e=this.userFormPanel.find('label[for="'+h+'"]');var g=this.userFormPanel.find("#"+h);if(f){g.addClass("fieldError")}else{g.removeClass("fieldError")}};c.ADD="add";c.UPDATE="update";c.CANCEL="cancel";
c.MODE_ADD="modeAdd";c.MODE_EDIT="modeEdit";return c})(b.UiComponent);b.UserForm=a})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(b){var a=(function(d){__extends(c,d);function c(){d.call(this);this.userListPanel=null;this.userList=null;this.newButton=null;this.deleteButton=null;this.selectedUser=null;this.users=null;this.initializeChildren();this.bindListeners()}c.prototype.initializeChildren=function(){this.userListPanel=jQuery(".user-list-panel");this.userList=this.userListPanel.find("#user-list");
this.userList.jqGrid({datatype:"local",width:630,height:160,colNames:["User Name","First Name","Last Name","Email","Department"],colModel:[{name:"uname",index:"uname",width:125},{name:"fname",index:"fname",width:125},{name:"lname",index:"lname",width:125},{name:"email",index:"email",width:130},{name:"department",index:"department",width:125}]});this.newButton=this.userListPanel.find(".new-button").button();this.deleteButton=this.userListPanel.find(".delete-button").button();this.deleteButton.button("disable")
};c.prototype.bindListeners=function(){var e=".UserList";this.userList.jqGrid("setGridParam",{onSelectRow:jQuery.proxy(this,"userList_selectHandler")});this.newButton.on("click"+e,jQuery.proxy(this,"newButton_clickHandler"));this.deleteButton.on("click"+e,jQuery.proxy(this,"deleteButton_clickHandler"))};c.prototype.unbindListeners=function(){var e=".UserList";this.userList.jqGrid("setGridParam",{onSelectRow:null});this.newButton.off("click"+e);this.deleteButton.off("click"+e)};c.prototype.destroy=function(){d.prototype.destroy.call(this);
this.unbindListeners()};c.prototype.setUsers=function(e){this.users=e;this.userList.jqGrid("clearGridData");for(var g=0;g<e.length;g++){var f=e[g];var h={uname:f.uname,fname:f.fname,lname:f.lname,email:f.email,department:f.department.value};this.userList.jqGrid("addRowData",g+1,h)}};c.prototype.getSelectedUser=function(){return this.selectedUser};c.prototype.deSelect=function(){this.userList.jqGrid("resetSelection");this.selectedUser=null;this.deleteButton.button("disable")};c.prototype.userList_selectHandler=function(j){var h=this.userList.jqGrid("getRowData",j);
var e;for(var f=0;f<this.users.length;f++){var g=this.users[f];if(g.uname===h.uname){e=h.uname;break}}this.selectedUser=e;this.dispatchEvent(c.SELECT);this.deleteButton.button("enable")};c.prototype.newButton_clickHandler=function(){this.deSelect();this.dispatchEvent(c.NEW)};c.prototype.deleteButton_clickHandler=function(){this.dispatchEvent(c.DELETE)};c.NEW="new";c.DELETE="delete";c.SELECT="select";return c})(b.UiComponent);b.UserList=a})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(a){var b=(function(c){__extends(d,c);
function d(){c.apply(this,arguments)}d.prototype.execute=function(i){var k=new a.UserForm();var e=new a.UserList();var j=new a.RolePanel();var g=new a.UserListMediator(a.MediatorNames.USER_LIST_MEDIATOR,e);var f=new a.UserFormMediator(a.MediatorNames.USER_FORM_MEDIATOR,k);var h=new a.RolePanelMediator(a.MediatorNames.ROLE_PANEL_MEDIATOR,j);this.facade.registerMediator(f);this.facade.registerMediator(g);this.facade.registerMediator(h)};return d})(puremvc.SimpleCommand);a.PrepViewCommand=b})(EmployeeAdmin||(EmployeeAdmin={}));
var EmployeeAdmin;(function(b){var a=(function(d){__extends(c,d);function c(){d.apply(this,arguments)}c.prototype.initializeMacroCommand=function(){this.addSubCommand(b.PrepModelCommand);this.addSubCommand(b.PrepViewCommand)};return c})(puremvc.MacroCommand);b.StartupCommand=a})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(a){var b=(function(d){__extends(c,d);function c(){d.apply(this,arguments)}c.prototype.execute=function(f){var e=f.getBody();var g=this.facade.retrieveProxy(a.ProxyNames.USER_PROXY);
var h=this.facade.retrieveProxy(a.ProxyNames.ROLE_PROXY);g.deleteItem(e.uname);h.deleteItem(e.uname);this.sendNotification(a.NotificationNames.USER_DELETED)};return c})(puremvc.SimpleCommand);a.DeleteUserCommand=b})(EmployeeAdmin||(EmployeeAdmin={}));var EmployeeAdmin;(function(a){var b=(function(d){__extends(e,d);function e(){d.apply(this,arguments)}e.prototype.startup=function(f){this.sendNotification(a.NotificationNames.STARTUP,f)};e.prototype.initializeController=function(){d.prototype.initializeController.call(this);
this.registerCommand(a.NotificationNames.STARTUP,a.StartupCommand);this.registerCommand(a.NotificationNames.DELETE_USER,a.DeleteUserCommand)};e.getInstance=function c(){if(!puremvc.Facade.instance){puremvc.Facade.instance=new e()}return puremvc.Facade.instance};return e})(puremvc.Facade);a.ApplicationFacade=b})(EmployeeAdmin||(EmployeeAdmin={}));