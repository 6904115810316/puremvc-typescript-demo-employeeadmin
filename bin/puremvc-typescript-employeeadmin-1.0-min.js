var ApplicationFacade=Objs("org.puremvc.js.demos.objs.employeeadmin.ApplicationFacade",Facade,{startup:function(a){this.sendNotification(NotificationNames.STARTUP,a)},initializeController:function(){ApplicationFacade.$super.initializeController.call(this);this.registerCommand(NotificationNames.STARTUP,StartupCommand);this.registerCommand(NotificationNames.DELETE_USER,DeleteUserCommand)}});ApplicationFacade.getInstance=function(){if(!Facade.instance){Facade.instance=new ApplicationFacade()}return Facade.instance
};var EmployeeAdmin;(function(a){var b=(function(){function c(){}c.USER_FORM_MEDIATOR="userFormMediator";c.USER_LIST_MEDIATOR="userListMediator";c.ROLE_PANEL_MEDIATOR="rolePanelMediator";return c})();a.MediatorNames=b})(EmployeeAdmin||(EmployeeAdmin={}));var NotificationNames=Objs("org.puremvc.js.demos.objs.employeeadmin.abc.NotificationNames",{});NotificationNames.STARTUP="startup";NotificationNames.NEW_USER="newUser";NotificationNames.DELETE_USER="deleteUser";NotificationNames.CANCEL_SELECTED="cancelSelected";
NotificationNames.USER_SELECTED="userSelected";NotificationNames.USER_ADDED="userAdded";NotificationNames.USER_UPDATED="userUpdated";NotificationNames.USER_DELETED="userDeleted";NotificationNames.ADD_ROLE="addRole";NotificationNames.ADD_ROLE_RESULT="addRoleResult";var ProxyNames=Objs("org.puremvc.js.demos.objs.employeeadmin.abc.ProxyNames",{});ProxyNames.ROLE_PROXY="roleProxy";ProxyNames.USER_PROXY="userProxy";var DeleteUserCommand=Objs("org.puremvc.js.demos.objs.employeeadmin.controller.DeleteUserCommand",SimpleCommand,{execute:function(b){var a=b.getBody();
var c=this.facade.retrieveProxy(ProxyNames.USER_PROXY);var d=this.facade.retrieveProxy(ProxyNames.ROLE_PROXY);c.deleteItem(a);d.deleteItem(a);this.sendNotification(NotificationNames.USER_DELETED)}});var PrepModelCommand=Objs("org.puremvc.js.demos.objs.employeeadmin.controller.PrepModelCommand",SimpleCommand,{execute:function(a){this.facade.registerProxy(new UserProxy(ProxyNames.USER_PROXY,this.generateUsers()));this.facade.registerProxy(new RoleProxy(ProxyNames.ROLE_PROXY,this.generateRoles()))},generateUsers:function(){var a;
var b=new Array();a=new UserVO();a.uname="lstooge";a.fname="Larry";a.lname="Stooge";a.email="larry@stooges.com";a.password="ijk456";a.department=DeptEnum.ACCT;b.push(a);a=new UserVO();a.uname="cstooge";a.fname="Curly";a.lname="Stooge";a.email="curly@stooges.com";a.password="xyz987";a.department=DeptEnum.SALES;b.push(a);a=new UserVO();a.uname="mstooge";a.fname="Moe";a.lname="Stooge";a.email="moe@stooges.com";a.password="abc123";a.department=DeptEnum.PLANT;b.push(a);return b},generateRoles:function(){var b;
var a=new Array();b=new RoleVO();b.uname="lstooge";b.roles=[RoleEnum.PAYROLL,RoleEnum.EMP_BENEFITS];a.push(b);b=new RoleVO();b.uname="cstooge";b.roles=[RoleEnum.ACCT_PAY,RoleEnum.ACCT_RCV,RoleEnum.GEN_LEDGER];a.push(b);b=new RoleVO();b.uname="mstooge";b.roles=[RoleEnum.INVENTORY,RoleEnum.PRODUCTION,RoleEnum.SALES,RoleEnum.SHIPPING];a.push(b);return a}});var PrepViewCommand=Objs("org.puremvc.js.demos.objs.employeeadmin.controller.PrepViewCommand",SimpleCommand,{execute:function(e){var g=new UserForm();
var a=new UserList();var f=new RolePanel();var c=new UserListMediator(MediatorNames.USER_LIST_MEDIATOR,a);var b=new UserFormMediator(MediatorNames.USER_FORM_MEDIATOR,g);var d=new RolePanelMediator(MediatorNames.ROLE_PANEL_MEDIATOR,f);this.facade.registerMediator(b);this.facade.registerMediator(c);this.facade.registerMediator(d)}});var StartupCommand=Objs("org.puremvc.js.demos.objs.employeeadmin.controller.StartupCommand",MacroCommand,{initializeMacroCommand:function(a){this.addSubCommand(PrepModelCommand);
this.addSubCommand(PrepViewCommand)}});var RoleProxy=Objs("org.puremvc.js.demos.objs.employeeadmin.model.RoleProxy",Proxy,{initialize:function(a,b){RoleProxy.$super.initialize.call(this,a,b);return this},getRoles:function(){return this.data},addItem:function(a){this.getRoles().push(a)},deleteItem:function(c){var b=this.getRoles();for(var a=0;a<b.length;a++){if(b[a].uname==c.uname){b.splice(a,1);break}}},doesUserHaveRole:function(a,h){var f=this.getRoles();var e=false;for(var c=0;c<f.length;c++){if(f[c].uname==a.uname){var g=f[c].roles;
for(var b=0;b<g.length;b++){var d=g[b];if(d.equals(h)){e=true;break}}break}}return e},addRoleToUser:function(b,f){var d=this.getRoles();var a=false;if(!this.doesUserHaveRole(b,f)){for(var c=0;c<d.length;c++){if(d[c].uname==b.uname){var e=d[c].roles;e.push(f);a=true;break}}}},removeRoleFromUser:function(a,g){var e=this.getRoles();if(this.doesUserHaveRole(a,g)){for(var c=0;c<e.length;c++){if(e[c].uname==a.uname){var f=e[c].roles;for(var b=0;b<f.length;b++){var d=f[b];if(d.equals(g)){f.splice(b,1);break
}}break}}}},getUserRoles:function(a){var c=this.getRoles();var d=new Array();for(var b=0;b<c.length;b++){if(c[b].uname==a){d=c[b].roles;break}}return d}});var UserProxy=Objs("org.puremvc.js.demos.objs.employeeadmin.model.UserProxy",Proxy,{initialize:function(a,b){UserProxy.$super.initialize.call(this,a,b)},getUsers:function(){return this.data},addItem:function(a){this.getUsers().push(a)},getUser:function(a){var c=this.getUsers();for(var b=0;b<c.length;b++){if(c[b].uname==a){return c[b]}}return null
},updateItem:function(a){var c=this.getUsers();for(var b=0;b<c.length;b++){if(c[b].uname==a.uname){c[b]=a}}},deleteItem:function(a){var c=this.getUsers();for(var b=0;b<c.length;b++){if(c[b].uname==a.uname){c.splice(b,1)}}}});var DeptEnum=Objs("org.puremvc.js.demos.objs.employeeadmin.model.enum.DeptEnum",{initialize:function(b,a){this.value=b;this.ordinal=a},ordinal:null,value:null,equals:function(a){return(this.ordinal==a.ordinal&&this.value==a.value)}});DeptEnum.NONE_SELECTED=new DeptEnum("Select a department",-1);
DeptEnum.ACCT=new DeptEnum("Accounting",0);DeptEnum.SALES=new DeptEnum("Sales",1);DeptEnum.PLANT=new DeptEnum("Plant",2);DeptEnum.SHIPPING=new DeptEnum("Shipping",3);DeptEnum.QC=new DeptEnum("Quality Control",4);DeptEnum.getList=function(){return[DeptEnum.ACCT,DeptEnum.SALES,DeptEnum.PLANT]};DeptEnum.getComboList=function(){var a=DeptEnum.getList();a.unshift(DeptEnum.NONE_SELECTED);return a};var RoleEnum=Objs("org.puremvc.js.demos.objs.employeeadmin.model.enum.RoleEnum",{ordinal:null,value:null,initialize:function(b,a){this.value=b;
this.ordinal=a},equals:function(a){return(this.ordinal==a.ordinal&&this.value==a.value)}});RoleEnum.NONE_SELECTED=new RoleEnum("Select a role",-1);RoleEnum.ADMIN=new RoleEnum("Administrator",0);RoleEnum.ACCT_PAY=new RoleEnum("Accounts Payable",1);RoleEnum.ACCT_RCV=new RoleEnum("Accounts Receivable",2);RoleEnum.EMP_BENEFITS=new RoleEnum("Employee Benefits",3);RoleEnum.GEN_LEDGER=new RoleEnum("General Ledger",4);RoleEnum.PAYROLL=new RoleEnum("Payroll",5);RoleEnum.INVENTORY=new RoleEnum("Inventory",6);
RoleEnum.PRODUCTION=new RoleEnum("Production",7);RoleEnum.QUALITY_CTL=new RoleEnum("Quality Control",8);RoleEnum.SALES=new RoleEnum("Sales",9);RoleEnum.ORDERS=new RoleEnum("Orders",10);RoleEnum.CUSTOMERS=new RoleEnum("Customers",11);RoleEnum.SHIPPING=new RoleEnum("Shipping",12);RoleEnum.RETURNS=new RoleEnum("Returns",13);RoleEnum.getList=function(){return[RoleEnum.ADMIN,RoleEnum.ACCT_PAY,RoleEnum.ACCT_RCV,RoleEnum.EMP_BENEFITS,RoleEnum.GEN_LEDGER,RoleEnum.PAYROLL,RoleEnum.INVENTORY,RoleEnum.PRODUCTION,RoleEnum.QUALITY_CTL,RoleEnum.SALES,RoleEnum.ORDERS,RoleEnum.CUSTOMERS,RoleEnum.SHIPPING,RoleEnum.RETURNS]
};RoleEnum.getComboList=function(){var a=RoleEnum.getList();a.unshift(RoleEnum.NONE_SELECTED);return a};RoleEnum.getItem=function(a){var c=RoleEnum.getList();for(var b=0;b<c.length;b++){if(RoleEnum[c[b]].ordinal==a){return RoleEnum[c[b]]}}return null};var RoleVO=Objs("org.puremvc.js.demos.objs.employeeadmin.model.vo.RoleVO",{uname:"",roles:[]});var UserVO=Objs("org.puremvc.js.demos.objs.employeeadmin.model.vo.UserVO",{uname:"",fname:"",lname:"",email:"",password:"",department:DeptEnum.NONE_SELECTED,getIsValid:function(){return this.uname!=""&&this.password!=""&&this.department!=DeptEnum.NONE_SELECTED
},getGivenName:function(){return this.lname+", "+this.fname}});var RolePanelMediator=Objs("org.puremvc.js.demos.objs.employeeadmin.view.components.RolePaneMediator",Mediator,{roleProxy:null,initialize:function(b,a){RolePanelMediator.$super.initialize.call(this,RolePanelMediator.NAME,a);this.registerListeners();this.roleProxy=this.facade.retrieveProxy(ProxyNames.ROLE_PROXY)},getRolePanel:function(){return this.viewComponent},registerListeners:function(){var a=this.getRolePanel();a.addEventListener(RolePanel.ADD,this.onAddRole,this);
a.addEventListener(RolePanel.REMOVE,this.onRemoveRole,this)},unregisterListeners:function(){var a=this.getRolePanel();a.removeEventListener(RolePanel.ADD,this.onAddRole,this);a.removeEventListener(RolePanel.REMOVE,this.onRemoveRole,this)},onAddRole:function(a){this.roleProxy.addRoleToUser(this.getRolePanel().getUser(),this.getRolePanel().getSelectedRole());this.updateUserRoleList();this.getRolePanel().setMode(null)},onRemoveRole:function(a){this.roleProxy.removeRoleFromUser(this.getRolePanel().getUser(),this.getRolePanel().getSelectedRole());
this.updateUserRoleList();this.getRolePanel().setMode(null)},updateUserRoleList:function(){var b=this.getRolePanel().user.uname;var a=this.roleProxy.getUserRoles(b);this.getRolePanel().setUserRoles(a)},listNotificationInterests:function(){return[NotificationNames.NEW_USER,NotificationNames.USER_ADDED,NotificationNames.USER_UPDATED,NotificationNames.USER_DELETED,NotificationNames.CANCEL_SELECTED,NotificationNames.USER_SELECTED,NotificationNames.ADD_ROLE_RESULT]},handleNotification:function(a){var c=this.getRolePanel();
switch(a.getName()){case NotificationNames.NEW_USER:c.clearForm();c.setEnabled(false);break;case NotificationNames.USER_ADDED:c.user=a.getBody();var b=new RoleVO();b.uname=c.user.uname;this.roleProxy.addItem(b);c.clearForm();c.setEnabled(false);break;case NotificationNames.USER_UPDATED:c.clearForm();c.setEnabled(false);break;case NotificationNames.USER_DELETED:c.clearForm();c.setEnabled(false);break;case NotificationNames.CANCEL_SELECTED:c.clearForm();c.setEnabled(false);break;case NotificationNames.USER_SELECTED:c.clearForm();
c.setEnabled(true);c.setMode(null);c.user=a.getBody();this.updateUserRoleList();break;case NotificationNames.ADD_ROLE_RESULT:this.updateUserRoleList();break}},onRemove:function(){this.unregisterListeners();this.getRolePanel().unbindListeners()}});var UserFormMediator=Objs("org.puremvc.js.demos.objs.employeeadmin.view.UserFormMediator",Mediator,{userProxy:null,initialize:function(b,a){UserFormMediator.$super.initialize.call(this,b,a);this.registerListeners();this.userProxy=this.facade.retrieveProxy(ProxyNames.USER_PROXY)
},getUserForm:function(){return this.viewComponent},registerListeners:function(){var a=this.getUserForm();a.addEventListener(UserForm.ADD,this.onAdd,this);a.addEventListener(UserForm.UPDATE,this.onUpdate,this);a.addEventListener(UserForm.CANCEL,this.onCancel,this)},unregisterListeners:function(){var a=this.getUserForm();a.addEventListener(UserForm.ADD,this.onAdd,this);a.addEventListener(UserForm.UPDATE,this.onUpdate,this);a.addEventListener(UserForm.CANCEL,this.onCancel,this)},onAdd:function(b){var a=this.getUserForm().getUser();
this.userProxy.addItem(a);this.sendNotification(NotificationNames.USER_ADDED,a);var c=this.getUserForm();c.clearForm();c.setEnabled(false);c.setMode(UserForm.MODE_ADD)},onUpdate:function(){var a=this.getUserForm().getUser();this.userProxy.updateItem(a);this.sendNotification(NotificationNames.USER_UPDATED,a);var b=this.getUserForm();b.clearForm();b.setEnabled(false);b.setMode(UserForm.MODE_ADD)},onCancel:function(){this.sendNotification(NotificationNames.CANCEL_SELECTED);var a=this.getUserForm();a.clearForm();
a.setEnabled(false);a.setMode(UserForm.MODE_ADD)},listNotificationInterests:function(){return[NotificationNames.NEW_USER,NotificationNames.USER_DELETED,NotificationNames.USER_SELECTED]},handleNotification:function(b){var c=this.getUserForm();var a;switch(b.getName()){case NotificationNames.NEW_USER:c.setUser(b.getBody());c.setMode(UserForm.MODE_ADD);c.setEnabled(true);c.setFocus();break;case NotificationNames.USER_DELETED:c.clearForm();c.setEnabled(false);break;case NotificationNames.USER_SELECTED:a=b.getBody();
c.clearForm();c.setUser(a);c.setMode(UserForm.MODE_EDIT);c.setEnabled(true);c.setFocus();break}},onRemove:function(){this.unregisterListeners();this.getUserForm().unbindListeners()}});UserFormMediator.ADD="add";UserFormMediator.UPDATE="update";UserFormMediator.CANCEL="cancel";UserFormMediator.MODE_ADD="modeAdd";UserFormMediator.MODE_EDIT="modeEdit";var UserListMediator=Objs("org.puremvc.js.demos.objs.employeeadmin.view.UserListMediator",Mediator,{userList:null,initialize:function(b,a){UserListMediator.$super.initialize.call(this,b,a);
this.registerListeners();var c=this.facade.retrieveProxy(ProxyNames.USER_PROXY);a.setUsers(c.getUsers())},registerListeners:function(){var a=this.getUserList();a.addEventListener(UserList.NEW,this.onNew,this);a.addEventListener(UserList.DELETE,this.onDelete,this);a.addEventListener(UserList.SELECT,this.onSelect,this)},unregisterListeners:function(){var a=this.getUserList();a.removeEventListener(UserList.NEW,this.onNew,this);a.removeEventListener(UserList.DELETE,this.onDelete,this);a.removeEventListener(UserList.SELECT,this.onSelect,this)
},getUserList:function(){return this.viewComponent},listNotificationInterests:function(){return[NotificationNames.CANCEL_SELECTED,NotificationNames.USER_UPDATED,NotificationNames.USER_ADDED,NotificationNames.USER_DELETED]},handleNotification:function(b){var a=this.getUserList();var c=this.facade.retrieveProxy(ProxyNames.USER_PROXY);switch(b.getName()){case NotificationNames.CANCEL_SELECTED:a.deSelect();break;case NotificationNames.USER_UPDATED:a.setUsers(c.getUsers());a.deSelect();break;case NotificationNames.USER_ADDED:a.setUsers(c.getUsers());
a.deSelect();break;case NotificationNames.USER_DELETED:a.setUsers(c.getUsers());a.deSelect();break}},onNew:function(){var a=new UserVO();this.sendNotification(NotificationNames.NEW_USER,a)},onDelete:function(){var a=this.getUserList().getSelectedUser();var c=this.facade.retrieveProxy(ProxyNames.USER_PROXY);var b=c.getUser(a);this.sendNotification(NotificationNames.DELETE_USER,b)},onSelect:function(){var a=this.getUserList().getSelectedUser();var c=this.facade.retrieveProxy(ProxyNames.USER_PROXY);
var b=c.getUser(a);this.sendNotification(NotificationNames.USER_SELECTED,b)},onRemove:function(){this.unregisterListeners();this.getUserList().unbindListeners()}});var RolePanel=Objs("org.puremvc.js.demos.objs.employeeadmin.view.components.RolePanel",UiComponent,{user:null,userRoles:null,selectedRole:null,mode:null,rolePanel:null,roleList:null,userRoleList:null,addRoleButton:null,removeRoleButton:null,initialize:function(){RolePanel.$super.initialize.call(this);this.initializeChildren();this.bindListeners();
this.fillRoleList();this.setEnabled(false)},initializeChildren:function(){this.rolePanel=jQuery(".role-panel");this.userRoleList=this.rolePanel.find("#user-role-list");this.userRoleList.jqGrid({datatype:"local",width:280,height:170,colNames:["Roles"],colModel:[{name:"value",index:"value"}]});this.roleList=this.rolePanel.find(".role-list");this.addRoleButton=this.rolePanel.find(".add-role-button").button();this.removeRoleButton=this.rolePanel.find(".remove-role-button").button()},bindListeners:function(){var a=".UserRoleList";
this.addRoleButton.on("click"+a,jQuery.proxy(this,"addRoleButton_clickHandler"));this.removeRoleButton.on("click"+a,jQuery.proxy(this,"removeRoleButton_clickHandler"));this.roleList.on("change"+a,jQuery.proxy(this,"roleList_changeHandler"));this.userRoleList.jqGrid("setGridParam",{onSelectRow:jQuery.proxy(this,"userRoleList_changeHandler")})},unbindListeners:function(){var a=".UserRoleList";this.addRoleButton.off("click"+a);this.removeRoleButton.off("click"+a);this.roleList.off("change"+a);this.userRoleList.jqGrid("setGridParam",{onSelectRow:null})
},fillRoleList:function(){var c=RoleEnum.getComboList();this.roleList.empty();var e="";for(var b=0;b<c.length;b++){var f=c[b];var d='value="'+f.ordinal+'"';var a=b==0?"selected":"";e+="<option "+d+" "+a+" >"+f.value+"</option>"}this.roleList.html(e)},setUserRoles:function(c){this.userRoleList.jqGrid("clearGridData");if(!c){return}this.userRoles=c;for(var a=0;a<c.length;a++){var d=c[a];var b=d;this.userRoleList.jqGrid("addRowData",a+1,b)}},getUser:function(){return this.user},getSelectedRole:function(){return this.selectedRole
},setEnabled:function(a){if(a){this.userRoleList.removeAttr("disabled");this.roleList.removeAttr("disabled");this.addRoleButton.button("enable");this.removeRoleButton.button("enable")}else{this.userRoleList.attr("disabled","disabled");this.roleList.attr("disabled","disabled");this.addRoleButton.button("disable");this.removeRoleButton.button("disable")}if(!a){this.roleList.prop("selectedIndex",0)}},setMode:function(a){switch(a){case RolePanel.ADD_MODE:this.addRoleButton.button("enable");this.removeRoleButton.button("disable");
break;case RolePanel.REMOVE_MODE:this.addRoleButton.button("disable");this.removeRoleButton.button("enable");this.roleList.selectedIndex=0;break;default:this.addRoleButton.button("disable");this.removeRoleButton.button("disable")}},clearForm:function(){this.user=null;this.setUserRoles(null);this.roleList.prop("selectedIndex",0);this.userRoleList.jqGrid("resetSelection")},addRoleButton_clickHandler:function(){this.dispatchEvent(RolePanel.ADD)},removeRoleButton_clickHandler:function(){this.dispatchEvent(RolePanel.REMOVE)
},userRoleList_changeHandler:function(b){var a=this.userRoleList.jqGrid("getInd",b);this.selectedRole=this.userRoles[a-1];this.setMode(RolePanel.REMOVE_MODE)},roleList_changeHandler:function(){this.userRoleList.jqGrid("resetSelection");var c=RoleEnum.getComboList();this.selectedRole=c[this.roleList.prop("selectedIndex")];var a=false;for(var b=0;b<this.userRoles.length;b++){var d=this.userRoles[b];if(d.equals(this.selectedRole)){a=true;break}}if(this.selectedRole==RoleEnum.NONE_SELECTED||a){this.setMode(null)
}else{this.setMode(RolePanel.ADD_MODE)}}});RolePanel.ADD="add";RolePanel.REMOVE="remove";RolePanel.ADD_MODE="addMode";RolePanel.REMOVE_MODE="removeMode";var UiComponent=Objs("org.puremvc.js.demos.objs.employeeadmin.view.components.UiComponent",{initialize:function(){this.listenerMap={}},listenerMap:null,dispatchEvent:function(g,e){if(typeof g=="undefined"){return}if(typeof this.listenerMap[UiComponent.QUEUE_PATTERN+g]=="undefined"){return}var b=this.listenerMap[UiComponent.QUEUE_PATTERN+g].slice(0);
var f=e||{};var a=b.length;for(var d=0;d<a;d++){var c=b[d];if(typeof c.listener=="function"){if(typeof c.context!="undefined"){c.listener.call(c.context,f)}else{c.listener.call(this,event,f)}}}},addEventListener:function(g,h,f){if(typeof g=="undefined"){return}if(typeof h=="undefined"){return}var d=new UiComponent.ListenerDescriptor(h,f);var b;if(typeof this.listenerMap[UiComponent.QUEUE_PATTERN+g]=="undefined"){b=this.listenerMap[UiComponent.QUEUE_PATTERN+g]=[]}else{b=this.listenerMap[UiComponent.QUEUE_PATTERN+g]
}var a=b.length;for(var e=0;e<a;e++){var c=b[e];if(c.equals(d)){return}}b.push(d)},removeEventListener:function(f,g,e){if(typeof f=="undefined"){return}if(typeof g=="undefined"){return}if(typeof this.listenerMap[UiComponent.QUEUE_PATTERN+f]=="undefined"){return}var b=this.listenerMap[UiComponent.QUEUE_PATTERN+f];var a=b.length;for(var d=0;d<a;d++){var c=b[d];if(c.equals(new UiComponent.ListenerDescriptor(g,e))){b.splice(d,1);return}}}});UiComponent.Event=Objs("org.puremvc.js.demos.objs.employeeadmin.view.components.UiComponent.Event",{type:null,properties:null});
UiComponent.ListenerDescriptor=Objs("org.puremvc.js.demos.objs.employeeadmin.view.components.UiComponent.Event",{initialize:function(b,a){this.listener=b;this.context=a},equals:function(a){if(a.listener==this.listener){if(typeof a.context!="undefined"){if(a.context==null&&this.context==null){return true}if(a.context==this.context){return true}}}return false}});UiComponent.QUEUE_PATTERN="@_@";var UserForm=Objs("org.puremvc.js.demos.objs.employeeadmin.view.components.UserForm",UiComponent,{userFormPanel:null,uname:null,fname:null,lname:null,email:null,password:null,confirm:null,department:null,submitButton:null,user:null,userRoles:null,mode:null,initialize:function(){UserForm.$super.initialize.call(this);
this.initializeChildren();this.bindListeners();this.clearForm();this.setEnabled(false)},initializeChildren:function(){this.userFormPanel=jQuery(".user-form-panel");this.uname=this.userFormPanel.find("#uname");this.fname=this.userFormPanel.find("#fname");this.lname=this.userFormPanel.find("#lname");this.email=this.userFormPanel.find("#email");this.password=this.userFormPanel.find("#password");this.confirm=this.userFormPanel.find("#confirm");this.department=this.userFormPanel.find(".department");this.submitButton=this.userFormPanel.find("#submit-button").button();
this.cancelButton=this.userFormPanel.find("#cancel-button").button()},bindListeners:function(){var b=".UserForm";var a=jQuery.proxy(this,"field_focusHandler");this.uname.on("focus"+b,a);this.password.on("focus"+b,a);this.confirm.on("focus"+b,a);this.department.on("focus"+b,a);this.submitButton.on("click"+b,jQuery.proxy(this,"submitButton_clickHandler"));this.cancelButton.on("click"+b,jQuery.proxy(this,"cancelButton_clickHandler"))},unbindListeners:function(){var a=".UserForm";this.uname.off("focus"+a);
this.password.off("focus"+a);this.confirm.off("focus"+a);this.department.off("focus"+a);this.roles.off("focus"+a);this.submitButton.off("click"+a);this.cancelButton.off("click"+a)},fillList:function(d){var f="";for(var c=0;c<d.length;c++){var b=d[c];var e='value="'+b.ordinal+'"';var a="";if(this.user&&b.equals(this.user.department)){a="selected"}if(!this.user&&b.equals(DeptEnum.NONE_SELECTED)){a="selected"}f+="<option "+e+" "+a+" >"+b.value+"</option>"}this.department.html(f)},setFocus:function(){this.fname.focus()
},setUser:function(a){this.user=a;if(!a){this.clearForm()}else{this.uname.val(a.uname);this.fname.val(a.fname);this.lname.val(a.lname);this.email.val(a.email);this.password.val(a.password);this.confirm.val(a.password);this.fillList(DeptEnum.getComboList())}},getUser:function(){this.updateUser();return this.user},updateUser:function(){this.user.uname=this.uname.val();this.user.fname=this.fname.val();this.user.lname=this.lname.val();this.user.email=this.email.val();this.user.password=this.password.val();
var b=parseInt(this.department.val())+1;var a=DeptEnum.getComboList();this.user.department=a[b]},clearForm:function(){this.uname.val("");this.fname.val("");this.lname.val("");this.email.val("");this.password.val("");this.confirm.val("");this.fillList([]);this.setFieldError("uname",false);this.setFieldError("password",false);this.setFieldError("confirm",false);this.setFieldError("department",false)},setEnabled:function(a){if(a){this.fname.removeAttr("disabled");this.lname.removeAttr("disabled");this.email.removeAttr("disabled");
this.password.removeAttr("disabled");this.confirm.removeAttr("disabled");this.department.removeAttr("disabled");this.submitButton.button("enable");this.cancelButton.button("enable");if(this.mode==UserForm.MODE_EDIT){this.uname.attr("disabled","disabled")}else{this.uname.removeAttr("disabled")}}else{this.uname.attr("disabled","disabled");this.fname.attr("disabled","disabled");this.lname.attr("disabled","disabled");this.email.attr("disabled","disabled");this.password.attr("disabled","disabled");this.confirm.attr("disabled","disabled");
this.department.attr("disabled","disabled");this.submitButton.button("disable");this.cancelButton.button("disable")}},setMode:function(a){this.mode=a;switch(a){case UserForm.MODE_ADD:this.submitButton.find(".ui-button-text").text("Add");break;case UserForm.MODE_EDIT:this.submitButton.find(".ui-button-text").text("Save");break}},submitButton_clickHandler:function(){this.updateUser();if(this.getErrors()){return}var a=this.getUser();if(a.getIsValid()){if(this.mode==UserForm.MODE_ADD){this.dispatchEvent(UserForm.ADD)
}else{this.dispatchEvent(UserForm.UPDATE)}}},cancelButton_clickHandler:function(){this.dispatchEvent(UserForm.CANCEL)},field_focusHandler:function(a){this.setFieldError(a.target.id,false)},getErrors:function(){var b=false;if(this.uname.val()==""){this.setFieldError("uname",b=true)}else{this.setFieldError("uname",false)}if(this.password.val()==""){this.setFieldError("password",b=true)}else{this.setFieldError("password",false)}if(this.password.val()!=""&&this.confirm.val()!=this.password.val()){this.setFieldError("confirm",b=true)
}else{this.setFieldError("confirm",false)}var d=parseInt(this.department.val())+1;var c=DeptEnum.getComboList();var a=c[d];if(a.equals(DeptEnum.NONE_SELECTED)){this.setFieldError("department",b=true)}else{this.setFieldError("department",false)}return b},setFieldError:function(d,b){var a=this.userFormPanel.find('label[for="'+d+'"]');var c=this.userFormPanel.find("#"+d);if(b){c.addClass("fieldError")}else{c.removeClass("fieldError")}}});UserForm.ADD="add";UserForm.UPDATE="update";UserForm.CANCEL="cancel";
UserForm.MODE_ADD="modeAdd";UserForm.MODE_EDIT="modeEdit";var UserList=Objs("org.puremvc.js.demos.objs.employeeadmin.view.components.UserList",UiComponent,{userListPanel:null,userList:null,newButton:null,selectedUser:null,users:null,initialize:function(){UserList.$super.initialize.call(this);this.initializeChildren();this.bindListeners()},initializeChildren:function(){this.userListPanel=jQuery(".user-list-panel");this.userList=this.userListPanel.find("#user-list");this.userList.jqGrid({datatype:"local",width:630,height:160,colNames:["User Name","First Name","Last Name","Email","Department"],colModel:[{name:"uname",index:"uname",width:125},{name:"fname",index:"fname",width:125},{name:"lname",index:"lname",width:125},{name:"email",index:"email",width:130},{name:"department",index:"department",width:125}]});
this.newButton=this.userListPanel.find(".new-button").button();this.deleteButton=this.userListPanel.find(".delete-button").button();this.deleteButton.button("disable")},bindListeners:function(){var a=".UserList";this.userList.jqGrid("setGridParam",{onSelectRow:jQuery.proxy(this,"userList_selectHandler")});this.newButton.on("click"+a,jQuery.proxy(this,"newButton_clickHandler"));this.deleteButton.on("click"+a,jQuery.proxy(this,"deleteButton_clickHandler"))},unbindListeners:function(){var a=".UserList";
this.userList.jqGrid("setGridParam",{onSelectRow:null});this.newButton.off("click"+a);this.deleteButton.off("click"+a)},setUsers:function(a){this.users=a;this.userList.jqGrid("clearGridData");for(var c=0;c<a.length;c++){var b=a[c];var d={uname:b.uname,fname:b.fname,lname:b.lname,email:b.email,department:b.department.value};this.userList.jqGrid("addRowData",c+1,d)}},getSelectedUser:function(){return this.selectedUser},userList_selectHandler:function(d){var c=this.userList.jqGrid("getRowData",d);var a;
for(var b=0;b<this.users.length;b++){if(this.users[b].uname==c.uname){a=c.uname;break}}this.selectedUser=a;this.dispatchEvent(UserList.SELECT);this.deleteButton.button("enable")},newButton_clickHandler:function(){this.deSelect();this.dispatchEvent(UserList.NEW)},deleteButton_clickHandler:function(){this.dispatchEvent(UserList.DELETE)},deSelect:function(){this.userList.jqGrid("resetSelection");this.selectedUser=null;this.deleteButton.button("disable")}});UserList.NEW="new";UserList.DELETE="delete";
UserList.SELECT="select";