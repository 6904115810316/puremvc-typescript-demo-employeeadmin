if(typeof define==="function"){define("EmployeeAdmin",[],function(){var a;(function(c){var d=(function(){function e(){}e.STARTUP="startup";e.NEW_USER="newUser";e.DELETE_USER="deleteUser";e.CANCEL_SELECTED="cancelSelected";e.USER_SELECTED="userSelected";e.USER_ADDED="userAdded";e.USER_UPDATED="userUpdated";e.USER_DELETED="userDeleted";e.ADD_ROLE="addRole";e.ADD_ROLE_RESULT="addRoleResult";return e})();c.NotificationNames=d})(a||(a={}));var a;(function(c){var d=(function(){function e(){}e.ROLE_PROXY="roleProxy";
e.USER_PROXY="userProxy";return e})();c.ProxyNames=d})(a||(a={}));var a;(function(d){var c=(function(){function g(i,h){this.ordinal=null;this.value=null;this.value=i;this.ordinal=h}g.prototype.equals=function(h){return(this.ordinal==h.ordinal&&this.value==h.value)};g.NONE_SELECTED=new g("Select a department",-1);g.ACCT=new g("Accounting",0);g.SALES=new g("Sales",1);g.PLANT=new g("Plant",2);g.SHIPPING=new g("Shipping",3);g.QC=new g("Quality Control",4);g.getList=function f(){return[g.ACCT,g.SALES,g.PLANT]
};g.getComboList=function e(){var h=g.getList();h.unshift(g.NONE_SELECTED);return h};return g})();d.DeptEnum=c})(a||(a={}));var a;(function(c){var d=(function(){function e(){this.uname="";this.fname="";this.lname="";this.email="";this.password="";this.department=c.DeptEnum.NONE_SELECTED}e.prototype.getIsValid=function(){return this.uname!=""&&this.password!=""&&this.department!=c.DeptEnum.NONE_SELECTED};e.prototype.getGivenName=function(){return this.lname+", "+this.fname};return e})();c.UserVO=d
})(a||(a={}));var a;(function(c){var d=(function(){function e(){this.uname="";this.roles=new Array()}return e})();c.RoleVO=d})(a||(a={}));var b=this.__extends||function(f,c){function e(){this.constructor=f}e.prototype=c.prototype;f.prototype=new e()};var a;(function(c){var d=(function(f){b(e,f);function e(){f.apply(this,arguments)}e.prototype.getUsers=function(){return this.data};e.prototype.addItem=function(g){this.getUsers().push(g)};e.prototype.getUser=function(g){var j=this.getUsers();for(var h=0;
h<j.length;h++){if(j[h].uname===g){return j[h]}}return null};e.prototype.updateItem=function(g){var j=this.getUsers();for(var h=0;h<j.length;h++){if(j[h].uname===g.uname){j[h]=g}}};e.prototype.deleteItem=function(g){var j=this.getUsers();for(var h=0;h<j.length;h++){if(j[h].uname===g){j.splice(h,1)}}};return e})(puremvc.Proxy);c.UserProxy=d})(a||(a={}));var a;(function(c){var d=(function(){function g(j,i){this.ordinal=null;this.value=null;this.value=j;this.ordinal=i}g.prototype.equals=function(i){return(this.ordinal==i.ordinal&&this.value==i.value)
};g.NONE_SELECTED=new g("Select a role",-1);g.ADMIN=new g("Administrator",0);g.ACCT_PAY=new g("Accounts Payable",1);g.ACCT_RCV=new g("Accounts Receivable",2);g.EMP_BENEFITS=new g("Employee Benefits",3);g.GEN_LEDGER=new g("General Ledger",4);g.PAYROLL=new g("Payroll",5);g.INVENTORY=new g("Inventory",6);g.PRODUCTION=new g("Production",7);g.QUALITY_CTL=new g("Quality Control",8);g.SALES=new g("Sales",9);g.ORDERS=new g("Orders",10);g.CUSTOMERS=new g("Customers",11);g.SHIPPING=new g("Shipping",12);g.RETURNS=new g("Returns",13);
g.getList=function f(){return[g.ADMIN,g.ACCT_PAY,g.ACCT_RCV,g.EMP_BENEFITS,g.GEN_LEDGER,g.PAYROLL,g.INVENTORY,g.PRODUCTION,g.QUALITY_CTL,g.SALES,g.ORDERS,g.CUSTOMERS,g.SHIPPING,g.RETURNS]};g.getComboList=function e(){var i=g.getList();i.unshift(g.NONE_SELECTED);return i};g.getItem=function h(j){var l=g.getList();for(var k=0;k<l.length;k++){if(l[k].ordinal==j){return l[k]}}return null};return g})();c.RoleEnum=d})(a||(a={}));var a;(function(c){var d=(function(e){b(f,e);function f(){e.apply(this,arguments)
}f.prototype.getRoles=function(){return this.data};f.prototype.addItem=function(g){this.getRoles().push(g)};f.prototype.deleteItem=function(g){var j=this.getRoles();for(var h=0;h<j.length;h++){if(j[h].uname===g){j.splice(h,1);break}}};f.prototype.doesUserHaveRole=function(g,p){var n=this.getRoles();var m=false;for(var k=0;k<n.length;k++){if(n[k].uname===g.uname){var o=n[k].roles;for(var h=0;h<o.length;h++){var l=o[h];if(l.equals(p)){m=true;break}}break}}return m};f.prototype.addRoleToUser=function(h,m){var k=this.getRoles();
var g=false;if(!this.doesUserHaveRole(h,m)){for(var j=0;j<k.length;j++){if(k[j].uname==h.uname){var l=k[j].roles;l.push(m);g=true;break}}}};f.prototype.removeRoleFromUser=function(g,o){var m=this.getRoles();if(this.doesUserHaveRole(g,o)){for(var k=0;k<m.length;k++){if(m[k].uname===g.uname){var n=m[k].roles;for(var h=0;h<n.length;h++){var l=n[h];if(l.equals(o)){n.splice(h,1);break}}break}}}};f.prototype.getUserRoles=function(g){var j=this.getRoles();var k=new Array();for(var h=0;h<j.length;h++){if(j[h].uname===g){k=j[h].roles;
break}}return k};return f})(puremvc.Proxy);c.RoleProxy=d})(a||(a={}));var a;(function(c){var d=(function(e){b(f,e);function f(){e.apply(this,arguments)}f.prototype.execute=function(g){var h=new c.UserProxy(c.ProxyNames.USER_PROXY,this.generateUsers());var i=new c.RoleProxy(c.ProxyNames.ROLE_PROXY,this.generateRoles());this.facade.registerProxy(h);this.facade.registerProxy(i)};f.prototype.generateUsers=function(){var g;var h=new Array();g=new c.UserVO();g.uname="lstooge";g.fname="Larry";g.lname="Stooge";
g.email="larry@stooges.com";g.password="ijk456";g.department=c.DeptEnum.ACCT;h.push(g);g=new c.UserVO();g.uname="cstooge";g.fname="Curly";g.lname="Stooge";g.email="curly@stooges.com";g.password="xyz987";g.department=c.DeptEnum.SALES;h.push(g);g=new c.UserVO();g.uname="mstooge";g.fname="Moe";g.lname="Stooge";g.email="moe@stooges.com";g.password="abc123";g.department=c.DeptEnum.PLANT;h.push(g);return h};f.prototype.generateRoles=function(){var h;var g=new Array();h=new c.RoleVO();h.uname="lstooge";
h.roles=[c.RoleEnum.PAYROLL,c.RoleEnum.EMP_BENEFITS];g.push(h);h=new c.RoleVO();h.uname="cstooge";h.roles=[c.RoleEnum.ACCT_PAY,c.RoleEnum.ACCT_RCV,c.RoleEnum.GEN_LEDGER];g.push(h);h=new c.RoleVO();h.uname="mstooge";h.roles=[c.RoleEnum.INVENTORY,c.RoleEnum.PRODUCTION,c.RoleEnum.SALES,c.RoleEnum.SHIPPING];g.push(h);return g};return f})(puremvc.SimpleCommand);c.PrepModelCommand=d})(a||(a={}));var a;(function(c){var d=(function(){function e(){}e.USER_FORM_MEDIATOR="userFormMediator";e.USER_LIST_MEDIATOR="userListMediator";
e.ROLE_PANEL_MEDIATOR="rolePanelMediator";return e})();c.MediatorNames=d})(a||(a={}));var a;(function(c){var d=(function(e){b(f,e);function f(h,g){e.call(this,h,g);this.userList=null;this.registerListeners();var i=this.facade.retrieveProxy(c.ProxyNames.USER_PROXY);g.setUsers(i.getUsers())}f.prototype.registerListeners=function(){var g=this.getUserList();g.addEventListener(c.UserList.NEW,this.onNew,this);g.addEventListener(c.UserList.DELETE,this.onDelete,this);g.addEventListener(c.UserList.SELECT,this.onSelect,this)
};f.prototype.unregisterListeners=function(){var g=this.getUserList();g.removeEventListener(c.UserList.NEW,this.onNew,this);g.removeEventListener(c.UserList.DELETE,this.onDelete,this);g.removeEventListener(c.UserList.SELECT,this.onSelect,this)};f.prototype.getUserList=function(){return this.viewComponent};f.prototype.listNotificationInterests=function(){return[c.NotificationNames.CANCEL_SELECTED,c.NotificationNames.USER_UPDATED,c.NotificationNames.USER_ADDED,c.NotificationNames.USER_DELETED]};f.prototype.handleNotification=function(h){var g=this.getUserList();
var i=this.facade.retrieveProxy(c.ProxyNames.USER_PROXY);switch(h.getName()){case c.NotificationNames.CANCEL_SELECTED:g.deSelect();break;case c.NotificationNames.USER_UPDATED:g.setUsers(i.getUsers());g.deSelect();break;case c.NotificationNames.USER_ADDED:g.setUsers(i.getUsers());g.deSelect();break;case c.NotificationNames.USER_DELETED:g.setUsers(i.getUsers());g.deSelect();break}};f.prototype.onNew=function(){var g=new c.UserVO();this.sendNotification(c.NotificationNames.NEW_USER,g)};f.prototype.onDelete=function(k,j){var g=this.getUserList();
var h=g.getSelectedUser();var l=this.facade.retrieveProxy(c.ProxyNames.USER_PROXY);var i=l.getUser(h);this.sendNotification(c.NotificationNames.DELETE_USER,i)};f.prototype.onSelect=function(k,j){var g=this.getUserList();var h=g.getSelectedUser();var l=this.facade.retrieveProxy(c.ProxyNames.USER_PROXY);var i=l.getUser(h);this.sendNotification(c.NotificationNames.USER_SELECTED,i)};f.prototype.onRemove=function(){this.unregisterListeners();this.getUserList().destroy()};return f})(puremvc.Mediator);c.UserListMediator=d
})(a||(a={}));var a;(function(c){var d=(function(f){b(e,f);function e(h,g){f.call(this,h,g);this.userProxy=null;this.registerListeners();this.userProxy=this.facade.retrieveProxy(c.ProxyNames.USER_PROXY)}e.prototype.getUserForm=function(){return this.viewComponent};e.prototype.registerListeners=function(){var g=this.getUserForm();g.addEventListener(c.UserForm.ADD,this.onAdd,this);g.addEventListener(c.UserForm.UPDATE,this.onUpdate,this);g.addEventListener(c.UserForm.CANCEL,this.onCancel,this)};e.prototype.unregisterListeners=function(){var g=this.getUserForm();
g.addEventListener(c.UserForm.ADD,this.onAdd,this);g.addEventListener(c.UserForm.UPDATE,this.onUpdate,this);g.addEventListener(c.UserForm.CANCEL,this.onCancel,this)};e.prototype.onAdd=function(i,h){var g=this.getUserForm().getUser();this.userProxy.addItem(g);this.sendNotification(c.NotificationNames.USER_ADDED,g);var j=this.getUserForm();j.clearForm();j.setEnabled(false);j.setMode(c.UserForm.MODE_ADD)};e.prototype.onUpdate=function(i,h){var g=this.getUserForm().getUser();this.userProxy.updateItem(g);
this.sendNotification(c.NotificationNames.USER_UPDATED,g);var j=this.getUserForm();j.clearForm();j.setEnabled(false);j.setMode(c.UserForm.MODE_ADD)};e.prototype.onCancel=function(h,g){this.sendNotification(c.NotificationNames.CANCEL_SELECTED);var i=this.getUserForm();i.clearForm();i.setEnabled(false);i.setMode(c.UserForm.MODE_ADD)};e.prototype.listNotificationInterests=function(){return[c.NotificationNames.NEW_USER,c.NotificationNames.USER_DELETED,c.NotificationNames.USER_SELECTED]};e.prototype.handleNotification=function(h){var i=this.getUserForm();
var g;switch(h.getName()){case c.NotificationNames.NEW_USER:i.setUser(h.getBody());i.setMode(c.UserForm.MODE_ADD);i.setEnabled(true);i.setFocus();break;case c.NotificationNames.USER_DELETED:i.clearForm();i.setEnabled(false);break;case c.NotificationNames.USER_SELECTED:g=h.getBody();i.clearForm();i.setUser(g);i.setMode(c.UserForm.MODE_EDIT);i.setEnabled(true);i.setFocus();break}};e.prototype.onRemove=function(){this.unregisterListeners();this.getUserForm().destroy()};e.ADD="add";e.UPDATE="update";
e.CANCEL="cancel";e.MODE_ADD="modeAdd";e.MODE_EDIT="modeEdit";return e})(puremvc.Mediator);c.UserFormMediator=d})(a||(a={}));var a;(function(c){var d=(function(f){b(e,f);function e(h,g){f.call(this,h,g);this.roleProxy=null;this.registerListeners();this.roleProxy=this.facade.retrieveProxy(c.ProxyNames.ROLE_PROXY)}e.prototype.getRolePanel=function(){return this.viewComponent};e.prototype.registerListeners=function(){var g=this.getRolePanel();g.addEventListener(c.RolePanel.ADD,this.onAddRole,this);g.addEventListener(c.RolePanel.REMOVE,this.onRemoveRole,this)
};e.prototype.unregisterListeners=function(){var g=this.getRolePanel();g.removeEventListener(c.RolePanel.ADD,this.onAddRole,this);g.removeEventListener(c.RolePanel.REMOVE,this.onRemoveRole,this)};e.prototype.onAddRole=function(h,g){this.roleProxy.addRoleToUser(this.getRolePanel().getUser(),this.getRolePanel().getSelectedRole());this.updateUserRoleList();this.getRolePanel().setMode(null)};e.prototype.onRemoveRole=function(h,g){this.roleProxy.removeRoleFromUser(this.getRolePanel().getUser(),this.getRolePanel().getSelectedRole());
this.updateUserRoleList();this.getRolePanel().setMode(null)};e.prototype.updateUserRoleList=function(){var g=this.getRolePanel().getUser();var h=this.roleProxy.getUserRoles(g.uname);this.getRolePanel().setUserRoles(h)};e.prototype.listNotificationInterests=function(){return[c.NotificationNames.NEW_USER,c.NotificationNames.USER_ADDED,c.NotificationNames.USER_UPDATED,c.NotificationNames.USER_DELETED,c.NotificationNames.CANCEL_SELECTED,c.NotificationNames.USER_SELECTED,c.NotificationNames.ADD_ROLE_RESULT]
};e.prototype.handleNotification=function(g){var i=this.getRolePanel();switch(g.getName()){case c.NotificationNames.NEW_USER:i.clearForm();i.setEnabled(false);break;case c.NotificationNames.USER_ADDED:i.setUser(g.getBody());var h=new c.RoleVO();h.uname=i.getUser().uname;this.roleProxy.addItem(h);i.clearForm();i.setEnabled(false);break;case c.NotificationNames.USER_UPDATED:i.clearForm();i.setEnabled(false);break;case c.NotificationNames.USER_DELETED:i.clearForm();i.setEnabled(false);break;case c.NotificationNames.CANCEL_SELECTED:i.clearForm();
i.setEnabled(false);break;case c.NotificationNames.USER_SELECTED:i.clearForm();i.setEnabled(true);i.setMode(null);i.setUser(g.getBody());this.updateUserRoleList();break;case c.NotificationNames.ADD_ROLE_RESULT:this.updateUserRoleList();break}};e.prototype.onRemove=function(){this.unregisterListeners();this.getRolePanel().destroy()};return e})(puremvc.Mediator);c.RolePanelMediator=d})(a||(a={}));var a;(function(d){var e=(function(){function f(){this.listenerMap=null;this.listenerMap={}}f.prototype.dispatchEvent=function(m,l){if(typeof l==="undefined"){l=null
}if(typeof m=="undefined"){return}if(typeof this.listenerMap[f.QUEUE_PATTERN+m]=="undefined"){return}var h=this.listenerMap[f.QUEUE_PATTERN+m].slice(0);var g=h.length;for(var k=0;k<g;k++){var j=h[k];if(typeof j.context!="undefined"){j.listener.call(j.context,m,l)}else{j.listener.call(this,m,l)}}};f.prototype.addEventListener=function(n,o,m){if(typeof m==="undefined"){m=null}if(typeof n=="undefined"){return}if(typeof o!="function"){return}var k=new c(o,m);var h;if(typeof this.listenerMap[f.QUEUE_PATTERN+n]=="undefined"){h=this.listenerMap[f.QUEUE_PATTERN+n]=[]
}else{h=this.listenerMap[f.QUEUE_PATTERN+n]}var g=h.length;for(var l=0;l<g;l++){var j=h[l];if(j.equals(k)){return}}h.push(k)};f.prototype.removeEventListener=function(m,n,l){if(typeof l==="undefined"){l=null}if(typeof m=="undefined"){return}if(typeof n=="undefined"){return}if(typeof this.listenerMap[f.QUEUE_PATTERN+m]=="undefined"){return}var h=this.listenerMap[f.QUEUE_PATTERN+m];var g=h.length;for(var k=0;k<g;k++){var j=h[k];if(j.equals(new c(n,l))){h.splice(k,1);return}}};f.prototype.destroy=function(){this.listenerMap={}
};f.QUEUE_PATTERN="@_@";return f})();d.UiComponent=e;var c=(function(){function f(h,g){this.listener=h;this.context=g}f.prototype.equals=function(g){if(g.listener===this.listener){if(typeof g.context!="undefined"){if(g.context==null&&this.context==null){return true}if(g.context===this.context){return true}}}return false};return f})()})(a||(a={}));var a;(function(c){var d=(function(f){b(e,f);function e(){f.call(this);this.user=null;this.userRoles=null;this.selectedRole=null;this.mode=null;this.rolePanel=null;
this.roleList=null;this.userRoleList=null;this.addRoleButton=null;this.removeRoleButton=null;this.initializeChildren();this.bindListeners();this.fillRoleList();this.setEnabled(false)}e.prototype.initializeChildren=function(){this.rolePanel=jQuery(".role-panel");this.userRoleList=this.rolePanel.find("#user-role-list");this.userRoleList.jqGrid({datatype:"local",width:280,height:170,colNames:["Roles"],colModel:[{name:"value",index:"value"}]});this.roleList=this.rolePanel.find(".role-list");this.addRoleButton=this.rolePanel.find(".add-role-button").button();
this.removeRoleButton=this.rolePanel.find(".remove-role-button").button()};e.prototype.bindListeners=function(){var g=".UserRoleList";this.addRoleButton.on("click"+g,jQuery.proxy(this,"addRoleButton_clickHandler"));this.removeRoleButton.on("click"+g,jQuery.proxy(this,"removeRoleButton_clickHandler"));this.roleList.on("change"+g,jQuery.proxy(this,"roleList_changeHandler"));this.userRoleList.jqGrid("setGridParam",{onSelectRow:jQuery.proxy(this,"userRoleList_changeHandler")})};e.prototype.unbindListeners=function(){var g=".UserRoleList";
this.addRoleButton.off("click"+g);this.removeRoleButton.off("click"+g);this.roleList.off("change"+g);this.userRoleList.jqGrid("setGridParam",{onSelectRow:null})};e.prototype.fillRoleList=function(){var j=c.RoleEnum.getComboList();this.roleList.empty();var l="";for(var h=0;h<j.length;h++){var m=j[h];var k='value="'+m.ordinal+'"';var g=h==0?"selected":"";l+="<option "+k+" "+g+" >"+m.value+"</option>"}this.roleList.html(l)};e.prototype.setUserRoles=function(h){this.userRoleList.jqGrid("clearGridData");
if(!h){return}this.userRoles=h;for(var g=0;g<h.length;g++){var j=h[g];this.userRoleList.jqGrid("addRowData",g+1,j)}};e.prototype.getUser=function(){return this.user};e.prototype.setUser=function(g){this.user=g};e.prototype.getSelectedRole=function(){return this.selectedRole};e.prototype.setEnabled=function(g){if(g){this.userRoleList.removeAttr("disabled");this.roleList.removeAttr("disabled");this.addRoleButton.button("enable");this.removeRoleButton.button("enable")}else{this.userRoleList.attr("disabled","disabled");
this.roleList.attr("disabled","disabled");this.addRoleButton.button("disable");this.removeRoleButton.button("disable")}if(!g){this.roleList.prop("selectedIndex",0)}};e.prototype.setMode=function(g){switch(g){case e.ADD_MODE:this.addRoleButton.button("enable");this.removeRoleButton.button("disable");break;case e.REMOVE_MODE:this.addRoleButton.button("disable");this.removeRoleButton.button("enable");this.roleList.prop("selectedIndex",0);break;default:this.addRoleButton.button("disable");this.removeRoleButton.button("disable")
}};e.prototype.clearForm=function(){this.user=null;this.setUserRoles(null);this.roleList.prop("selectedIndex",0);this.userRoleList.jqGrid("resetSelection")};e.prototype.destroy=function(){f.prototype.destroy.call(this);this.unbindListeners()};e.prototype.addRoleButton_clickHandler=function(){this.dispatchEvent(e.ADD)};e.prototype.removeRoleButton_clickHandler=function(){this.dispatchEvent(e.REMOVE)};e.prototype.userRoleList_changeHandler=function(h){var g=this.userRoleList.jqGrid("getInd",h);this.selectedRole=this.userRoles[g-1];
this.setMode(e.REMOVE_MODE)};e.prototype.roleList_changeHandler=function(){this.userRoleList.jqGrid("resetSelection");var j=c.RoleEnum.getComboList();this.selectedRole=j[this.roleList.prop("selectedIndex")];var g=false;for(var h=0;h<this.userRoles.length;h++){var k=this.userRoles[h];if(k.equals(this.selectedRole)){g=true;break}}if(this.selectedRole==c.RoleEnum.NONE_SELECTED||g){this.setMode(null)}else{this.setMode(e.ADD_MODE)}};e.ADD="add";e.REMOVE="remove";e.ADD_MODE="addMode";e.REMOVE_MODE="removeMode";
return e})(c.UiComponent);c.RolePanel=d})(a||(a={}));var a;(function(d){var c=(function(f){b(e,f);function e(){f.call(this);this.userFormPanel=null;this.uname=null;this.fname=null;this.lname=null;this.email=null;this.password=null;this.confirm=null;this.department=null;this.cancelButton=null;this.submitButton=null;this.user=null;this.userRoles=null;this.mode=null;this.initializeChildren();this.bindListeners();this.clearForm();this.setEnabled(false)}e.prototype.initializeChildren=function(){this.userFormPanel=jQuery(".user-form-panel");
this.uname=this.userFormPanel.find("#uname");this.fname=this.userFormPanel.find("#fname");this.lname=this.userFormPanel.find("#lname");this.email=this.userFormPanel.find("#email");this.password=this.userFormPanel.find("#password");this.confirm=this.userFormPanel.find("#confirm");this.department=this.userFormPanel.find(".department");this.submitButton=this.userFormPanel.find("#submit-button").button();this.cancelButton=this.userFormPanel.find("#cancel-button").button()};e.prototype.bindListeners=function(){var h=".UserForm";
var g=jQuery.proxy(this,"field_focusHandler");this.uname.on("focus"+h,g);this.password.on("focus"+h,g);this.confirm.on("focus"+h,g);this.department.on("focus"+h,g);this.submitButton.on("click"+h,jQuery.proxy(this,"submitButton_clickHandler"));this.cancelButton.on("click"+h,jQuery.proxy(this,"cancelButton_clickHandler"))};e.prototype.unbindListeners=function(){var g=".UserForm";this.uname.off("focus"+g);this.password.off("focus"+g);this.confirm.off("focus"+g);this.department.off("focus"+g);this.submitButton.off("click"+g);
this.cancelButton.off("click"+g)};e.prototype.fillList=function(k){var m="";for(var j=0;j<k.length;j++){var h=k[j];var l='value="'+h.ordinal+'"';var g="";if(this.user&&h.equals(this.user.department)){g="selected"}if(!this.user&&h.equals(d.DeptEnum.NONE_SELECTED)){g="selected"}m+="<option "+l+" "+g+" >"+h.value+"</option>"}this.department.html(m)};e.prototype.setFocus=function(){this.fname.focus()};e.prototype.setUser=function(g){this.user=g;if(!g){this.clearForm()}else{this.uname.val(g.uname);this.fname.val(g.fname);
this.lname.val(g.lname);this.email.val(g.email);this.password.val(g.password);this.confirm.val(g.password);this.fillList(d.DeptEnum.getComboList())}};e.prototype.getUser=function(){this.updateUser();return this.user};e.prototype.updateUser=function(){this.user.uname=this.uname.val();this.user.fname=this.fname.val();this.user.lname=this.lname.val();this.user.email=this.email.val();this.user.password=this.password.val();var h=parseInt(this.department.val())+1;var g=d.DeptEnum.getComboList();this.user.department=g[h]
};e.prototype.clearForm=function(){this.uname.val("");this.fname.val("");this.lname.val("");this.email.val("");this.password.val("");this.confirm.val("");this.fillList([]);this.setFieldError("uname",false);this.setFieldError("password",false);this.setFieldError("confirm",false);this.setFieldError("department",false)};e.prototype.setEnabled=function(g){if(g){this.fname.removeAttr("disabled");this.lname.removeAttr("disabled");this.email.removeAttr("disabled");this.password.removeAttr("disabled");this.confirm.removeAttr("disabled");
this.department.removeAttr("disabled");this.submitButton.button("enable");this.cancelButton.button("enable");if(this.mode==e.MODE_EDIT){this.uname.attr("disabled","disabled")}else{this.uname.removeAttr("disabled")}}else{this.uname.attr("disabled","disabled");this.fname.attr("disabled","disabled");this.lname.attr("disabled","disabled");this.email.attr("disabled","disabled");this.password.attr("disabled","disabled");this.confirm.attr("disabled","disabled");this.department.attr("disabled","disabled");
this.submitButton.button("disable");this.cancelButton.button("disable")}};e.prototype.setMode=function(g){this.mode=g;switch(g){case e.MODE_ADD:this.submitButton.find(".ui-button-text").text("Add");break;case e.MODE_EDIT:this.submitButton.find(".ui-button-text").text("Save");break}};e.prototype.destroy=function(){f.prototype.destroy.call(this);this.unbindListeners()};e.prototype.submitButton_clickHandler=function(){this.updateUser();if(this.getErrors()){return}var g=this.getUser();if(g.getIsValid()){if(this.mode==e.MODE_ADD){this.dispatchEvent(e.ADD)
}else{this.dispatchEvent(e.UPDATE)}}};e.prototype.cancelButton_clickHandler=function(){this.dispatchEvent(e.CANCEL)};e.prototype.field_focusHandler=function(g){this.setFieldError(g.target.id,false)};e.prototype.getErrors=function(){var h=false;if(this.uname.val()==""){this.setFieldError("uname",h=true)}else{this.setFieldError("uname",false)}if(this.password.val()==""){this.setFieldError("password",h=true)}else{this.setFieldError("password",false)}if(this.password.val()!=""&&this.confirm.val()!=this.password.val()){this.setFieldError("confirm",h=true)
}else{this.setFieldError("confirm",false)}var j=parseInt(this.department.val())+1;var i=d.DeptEnum.getComboList();var g=i[j];if(g.equals(d.DeptEnum.NONE_SELECTED)){this.setFieldError("department",h=true)}else{this.setFieldError("department",false)}return h};e.prototype.setFieldError=function(j,h){var g=this.userFormPanel.find('label[for="'+j+'"]');var i=this.userFormPanel.find("#"+j);if(h){i.addClass("fieldError")}else{i.removeClass("fieldError")}};e.ADD="add";e.UPDATE="update";e.CANCEL="cancel";
e.MODE_ADD="modeAdd";e.MODE_EDIT="modeEdit";return e})(d.UiComponent);d.UserForm=c})(a||(a={}));var a;(function(d){var c=(function(f){b(e,f);function e(){f.call(this);this.userListPanel=null;this.userList=null;this.newButton=null;this.deleteButton=null;this.selectedUser=null;this.users=null;this.initializeChildren();this.bindListeners()}e.prototype.initializeChildren=function(){this.userListPanel=jQuery(".user-list-panel");this.userList=this.userListPanel.find("#user-list");this.userList.jqGrid({datatype:"local",width:630,height:160,colNames:["User Name","First Name","Last Name","Email","Department"],colModel:[{name:"uname",index:"uname",width:125},{name:"fname",index:"fname",width:125},{name:"lname",index:"lname",width:125},{name:"email",index:"email",width:130},{name:"department",index:"department",width:125}]});
this.newButton=this.userListPanel.find(".new-button").button();this.deleteButton=this.userListPanel.find(".delete-button").button();this.deleteButton.button("disable")};e.prototype.bindListeners=function(){var g=".UserList";this.userList.jqGrid("setGridParam",{onSelectRow:jQuery.proxy(this,"userList_selectHandler")});this.newButton.on("click"+g,jQuery.proxy(this,"newButton_clickHandler"));this.deleteButton.on("click"+g,jQuery.proxy(this,"deleteButton_clickHandler"))};e.prototype.unbindListeners=function(){var g=".UserList";
this.userList.jqGrid("setGridParam",{onSelectRow:null});this.newButton.off("click"+g);this.deleteButton.off("click"+g)};e.prototype.destroy=function(){f.prototype.destroy.call(this);this.unbindListeners()};e.prototype.setUsers=function(g){this.users=g;this.userList.jqGrid("clearGridData");for(var j=0;j<g.length;j++){var h=g[j];var k={uname:h.uname,fname:h.fname,lname:h.lname,email:h.email,department:h.department.value};this.userList.jqGrid("addRowData",j+1,k)}};e.prototype.getSelectedUser=function(){return this.selectedUser
};e.prototype.deSelect=function(){this.userList.jqGrid("resetSelection");this.selectedUser=null;this.deleteButton.button("disable")};e.prototype.userList_selectHandler=function(l){var k=this.userList.jqGrid("getRowData",l);var g;for(var h=0;h<this.users.length;h++){var j=this.users[h];if(j.uname===k.uname){g=k.uname;break}}this.selectedUser=g;this.dispatchEvent(e.SELECT);this.deleteButton.button("enable")};e.prototype.newButton_clickHandler=function(){this.deSelect();this.dispatchEvent(e.NEW)};e.prototype.deleteButton_clickHandler=function(){this.dispatchEvent(e.DELETE)
};e.NEW="new";e.DELETE="delete";e.SELECT="select";return e})(d.UiComponent);d.UserList=c})(a||(a={}));var a;(function(c){var d=(function(e){b(f,e);function f(){e.apply(this,arguments)}f.prototype.execute=function(k){var m=new c.UserForm();var g=new c.UserList();var l=new c.RolePanel();var i=new c.UserListMediator(c.MediatorNames.USER_LIST_MEDIATOR,g);var h=new c.UserFormMediator(c.MediatorNames.USER_FORM_MEDIATOR,m);var j=new c.RolePanelMediator(c.MediatorNames.ROLE_PANEL_MEDIATOR,l);this.facade.registerMediator(h);
this.facade.registerMediator(i);this.facade.registerMediator(j)};return f})(puremvc.SimpleCommand);c.PrepViewCommand=d})(a||(a={}));var a;(function(d){var c=(function(f){b(e,f);function e(){f.apply(this,arguments)}e.prototype.initializeMacroCommand=function(){this.addSubCommand(d.PrepModelCommand);this.addSubCommand(d.PrepViewCommand)};return e})(puremvc.MacroCommand);d.StartupCommand=c})(a||(a={}));var a;(function(c){var d=(function(f){b(e,f);function e(){f.apply(this,arguments)}e.prototype.execute=function(h){var g=h.getBody();
var i=this.facade.retrieveProxy(c.ProxyNames.USER_PROXY);var j=this.facade.retrieveProxy(c.ProxyNames.ROLE_PROXY);i.deleteItem(g.uname);j.deleteItem(g.uname);this.sendNotification(c.NotificationNames.USER_DELETED)};return e})(puremvc.SimpleCommand);c.DeleteUserCommand=d})(a||(a={}));var a;(function(c){var d=(function(f){b(g,f);function g(){f.apply(this,arguments)}g.prototype.startup=function(h){this.sendNotification(c.NotificationNames.STARTUP,h)};g.prototype.initializeController=function(){f.prototype.initializeController.call(this);
this.registerCommand(c.NotificationNames.STARTUP,c.StartupCommand);this.registerCommand(c.NotificationNames.DELETE_USER,c.DeleteUserCommand)};g.getInstance=function e(){if(!puremvc.Facade.instance){puremvc.Facade.instance=new g()}return puremvc.Facade.instance};return g})(puremvc.Facade);c.ApplicationFacade=d})(a||(a={}));return a})};